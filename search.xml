<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Thinkphp：配置PHPUnit单元测试]]></title>
      <url>http://dffuture.github.io/2016/05/22/Thinkphp%EF%BC%9A%E9%85%8D%E7%BD%AEPHPUnit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</url>
      <content type="html"><![CDATA[<h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><blockquote>
<p>Thinkphp版本：3.2.3<br>安装工具： <a href="http://www.phpcomposer.com/" target="_blank" rel="external">composer</a><br>PHPUnit：<a href="https://github.com/snowair/think-phpunit" target="_blank" rel="external">snowair/think-phpunit</a><br>PHP IDE：PHPStrom</p>
</blockquote>
<h3 id="使用Composer安装单元测试辅助类"><a href="#使用Composer安装单元测试辅助类" class="headerlink" title="使用Composer安装单元测试辅助类"></a>使用Composer安装单元测试辅助类</h3><p>直接编辑Thinkphp根目录下的<code>composer.json</code>，添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;autoload&quot;: &#123;</span><br><span class="line">	&quot;classmap&quot;: [&quot;Application&quot;,&quot;ThinkPHP/Library&quot;]</span><br><span class="line">&#125;,</span><br><span class="line">&quot;require-dev&quot;: &#123;</span><br><span class="line">	&quot;snowair/think-phpunit&quot;: &quot;dev-master&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>在根目录下打开bash界面，首次安装输入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ composer install</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>更新输入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ composer update</span><br></pre></td></tr></table></figure></p>
<p>如果在项目中增加了新的class，重建autoload<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ composer dump-autoload</span><br></pre></td></tr></table></figure></p>
<p>安装成功，在根目录下出现<code>vender</code>文件夹和<code>compser.lock</code>文件</p>
<h3 id="PHPStorm中配置PHPUnit"><a href="#PHPStorm中配置PHPUnit" class="headerlink" title="PHPStorm中配置PHPUnit"></a>PHPStorm中配置PHPUnit</h3><p>打开<code>文件-》设置</code><br>选择<code>语言与框架-》PHP</code>，设置<code>Interpreter</code></p>
<p><img src="http://ww3.sinaimg.cn/mw690/6cad6f69gw1f440yzhsj1j20su0jiq40.jpg" alt="此处输入图片的描述"></p>
<p>选择<code>语言与框架-》PHP-》PHPUnit</code>，选择<code>autoloader</code>地址</p>
<p><img src="http://ww2.sinaimg.cn/mw690/6cad6f69gw1f440yz7o8zj20su0jitae.jpg" alt="此处输入图片的描述"></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>这里我只测试了Controller<br>在根目录下新建Test文件夹，用来存放测试文件，<br>新建<code>IndexControllerTest.php</code>用来测试<code>IndexController</code><br>在<code>IndexController</code>中创建一个<code>hello</code>方法<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	$this-&gt;show(<span class="string">"hello world"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>测试代码如下，测试<code>hello</code>方法<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Home</span>\<span class="title">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexControllerTest</span> <span class="keyword">extends</span> \<span class="title">PHPUnit_Framework_TestCase</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> \<span class="title">Think</span>\<span class="title">PhpUnit</span>; <span class="comment">// 只有控制器测试类才需要它</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setupBeforeClass</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="comment">// 下面四行代码模拟出一个应用实例, 每一行都很关键, 需正确设置参数</span></span><br><span class="line">        <span class="keyword">self</span>::$app = <span class="keyword">new</span> \Think\PhpunitHelper();</span><br><span class="line">        <span class="keyword">self</span>::$app-&gt;setMVC(<span class="string">'domain.com'</span>,<span class="string">'Home'</span>,<span class="string">'Index'</span>);</span><br><span class="line">        <span class="keyword">self</span>::$app-&gt;setTestConfig([<span class="string">'DB_NAME'</span>=&gt;<span class="string">'test'</span>, <span class="string">'DB_HOST'</span>=&gt;<span class="string">'127.0.0.1'</span>,]); <span class="comment">// 一定要设置一个测试用的数据库,避免测试过程破坏生产数据</span></span><br><span class="line">        <span class="keyword">self</span>::$app-&gt;start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 控制器action输出测试示例</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">testHello</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        $output = $this-&gt;execAction(<span class="string">'hello'</span>);</span><br><span class="line">        $this-&gt;assertEquals(<span class="string">'hello world'</span>,$output);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>测试数据库与Thinkphp本身配置的数据库要不同，否则会报错<br>右击运行测试程序，测试成功</p>
<p><img src="http://ww1.sinaimg.cn/mw690/6cad6f69gw1f442ho5svej20od0913yv.jpg" alt="此处输入图片的描述"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ubuntu指南——PPA介绍]]></title>
      <url>http://dffuture.github.io/2016/05/17/Ubuntu%E6%8C%87%E5%8D%97%E2%80%94%E2%80%94PPA%E4%BB%8B%E7%BB%8D/</url>
      <content type="html"><![CDATA[<h3 id="什么是PPA"><a href="#什么是PPA" class="headerlink" title="什么是PPA"></a>什么是PPA</h3><blockquote>
<p>PPA是Personal Package Archives（个人软件包档案）首字母简写，是Ubuntu Launchpad<br>网站提供的一项服务，允许个人用户上传软件源代码，通过Launchpad进行编译并发布为二进制软件包，<br>作为apt/新立得源供其他用户下载和更新。在Launchpad网站上的每一个用户和团队都可以拥有一个或多个PPA。</p>
</blockquote>
<a id="more"></a>
<h3 id="常用PPA"><a href="#常用PPA" class="headerlink" title="常用PPA"></a>常用PPA</h3><h4 id="git"><a href="#git" class="headerlink" title="git:"></a>git:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:git-core/ppa</span><br></pre></td></tr></table></figure>
<h4 id="atom"><a href="#atom" class="headerlink" title="atom:"></a>atom:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:webupd8team/atom</span><br></pre></td></tr></table></figure>
<h4 id="java"><a href="#java" class="headerlink" title="java"></a>java</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:webupd8team/java</span><br></pre></td></tr></table></figure>
<h4 id="android-studio"><a href="#android-studio" class="headerlink" title="android studio"></a>android studio</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-add-repository ppa:paolorotolo/android-studio</span><br></pre></td></tr></table></figure>
<h4 id="PHP7"><a href="#PHP7" class="headerlink" title="PHP7"></a>PHP7</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:ondrej/php</span><br></pre></td></tr></table></figure>
<h3 id="查看更多PPA"><a href="#查看更多PPA" class="headerlink" title="查看更多PPA"></a>查看更多PPA</h3><blockquote>
<p><a href="https://launchpad.net/ubuntu/+ppas" target="_blank" rel="external">https://launchpad.net/ubuntu/+ppas</a><br><a href="http://www.ubuntuupdates.org/ppas" target="_blank" rel="external">http://www.ubuntuupdates.org/ppas</a></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello Hexo]]></title>
      <url>http://dffuture.github.io/2016/03/28/hello-hexo/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.<br><a id="more"></a></p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    </entry>
    
  
  
</search>
